server {
        listen 80 default_server;
        server_name bergplex.com www.bergplex.com;
        return 301 https://$server_name$request_uri;
}

server {
        listen 443 default_server;
        server_name bergplex.com www.bergplex.com;
        ssl on;
        ssl_certificate /config/keys/bergplex.crt;
        ssl_certificate_key /config/keys/bergplex.key;

        auth_basic "Restricted";
        auth_basic_user_file /config/.htpasswd;

        location /sonarr {
                proxy_pass http://149.56.195.25:8989;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        location /deluge {
                proxy_pass http://149.56.195.25:8112/;
                proxy_set_header X-Deluge-Base "/deluge/";
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        location /requests {
                auth_basic off;
                proxy_pass http://149.56.195.25:3000;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        location /sabnzbd {
                proxy_pass http://149.56.195.25:8080;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        location /couchpotato {
                proxy_pass http://149.56.195.25:5050;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        location /plexpy {
                proxy_pass http://149.56.195.25:8181;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

	location /jackett/ {
                proxy_pass http://149.56.195.25:9117/;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

        }
